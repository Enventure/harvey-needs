!function(e){function t(e){return"https://maps.googleapis.com/maps/api/js?key="+e.key+"&libraries=places&callback="+e.callbackName}function n(e){var t=document.createElement("script");t.src=e,t.async="async",t.defer="defer",document.body.appendChild(t)}function a(){n(t({key:"AIzaSyBDDHVgqF1j2slH76KvTqjX3JNbGhPv5AA",callbackName:"initMap"}))}function o(){n("https://spreadsheets.google.com/feeds/list/1ydfNo5XECkxl7vaNIHMGqrm56-JyLTx2PDUtc-LwadU/oeduks3/public/values?alt=json-in-script&callback=initData")}function i(e){return e.data}function l(e,t){function n(e){var t=e.coords.latitude,n=e.coords.longitude;console.info(e)}function a(){console.info("Could not get position.")}navigator.geolocation&&navigator.geolocation.getCurrentPosition(e||n,t||a)}function s(e){e.result&&e.result.markers&&e.result.markers.forEach(x.add.bind(x))}function c(e){return e&&{lat:e[0],lng:e[1]}}function r(e){return c(e.cleanLatLng)||c(e.rawLatLng)}function p(e){var t=_.pick(e,["lat","lng"]);if(t){var e=new google.maps.Marker({position:t,title:e.address});return e}}function u(t){var n=function(e){return e.toFixed(4)},a=[];return t.supplyNeeds&&(console.info("Could not get fasdf."),a.push('<h3 class="halp-list--item-type">'+t.supplyNeeds+"</h3>")),t.supplyNeedsDetail&&(console.info("Could not get asdf."),a.push('<p class="halp-list--item-type">'+t.supplyNeedsDetail+"</p>")),t.phone&&a.push('<p class="halp-list--item-type"><a href="tel:'+t.tel+'">'+t.phone+"</a></p>"),t.email&&a.push('<p class="halp-list--item-type"><a href="mailto:'+t.email+'">'+t.email+"</a></p>"),a.push("<p>Share link: </p><pre><code>"+e.location.origin+e.location.pathname+"/#!/"+t.key+"</code></pre>"),a.join("")}function d(e){var t=document.createElement("li");return t.innerHTML=u(e),t}function m(e,t){var n="active";Array.prototype.forEach.call(D.querySelectorAll("li"),function(t){t!==e&&t.classList.remove("active")}),q.intoView(e,200,function(){e.classList.add("active")})}function f(e,t){x.outputs.forEach(function(t,n){var a=x.collection[n];t.mapMarker&&t.mapMarker!==e&&(t.mapMarker.setIcon("//maps.google.com/intl/en_us/mapfiles/ms/micons/red-dot.png"),t.mapMarker.setZIndex(1))}),e&&(e.setIcon("//maps.google.com/intl/en_us/mapfiles/ms/micons/purple-dot.png"),e.setZIndex(10),MAP.getBounds().contains(e.getPosition())||(MAP.setZoom(E.zoom),MAP.setCenter(e.getPosition())))}function g(e){var t=_.find(x.collection,{key:e}),n=_.findIndex(x.collection,{key:e}),a=x.outputs[n].listItem,o=x.outputs[n].mapMarker;_.delay(function(){m(a,t),f(o,t)},100)}function y(e){var t=p(e),n=d(e),a=function(){m(n,e),f(t,e),page("/"+e.key)};return D.appendChild(n),t&&(t.setMap(MAP),t.addListener("click",a)),n.addEventListener("click",a),{mapMarker:t,listItem:n,onSelect:a}}function h(){var t=new google.maps.Map(C,E);e.MAP=t,o(),l(function(e){t.setCenter({lat:e.coords.latitude,lng:e.coords.longitude})})}function k(e,t){return _.property("gsx$"+e+".$t")(t)}function v(e){var t=e.feed.entry;console.info(t);var n=_.filter(t,function(e){return"No"==k("fulfilled",e)}),a=_.map(n,function(e){return{address:k("address",e),lat:parseFloat(k("latitude",e)),lng:parseFloat(k("longitude",e)),name:k("individual",e),phone:k("phone",e),tel:k("phone",e).replace(/\D+/g,""),email:k("email",e),supplyNeeds:k("needs",e),supplyNeedsDetail:k("needsdetail",e),key:_.kebabCase(k("individual",e))}}),o=_.map(a,p);_.forEach(a,x.add.bind(x)),S&&g(S)}function M(e){S=e.params.place}function b(){}function N(){page("/",b),page("/:place",M),page.base("/harvey-needs"),page({hashbang:!0})}var w="./api/keys",A={lat:29.7604,lng:-95.3698},E={center:A,zoom:12},L=document.querySelectorAll("a"),C=document.getElementById("map"),I="./api/markers",D=document.getElementById("list"),P=document.querySelector(".halp-sidebar"),q=zenscroll.createScroller(P),x=new MarkersCollection([],y),j="https://spreadsheets.google.com/feeds/list/1ydfNo5XECkxl7vaNIHMGqrm56-JyLTx2PDUtc-LwadU/oeduks3/public/values?alt=json-in-script&callback=p",S;!function(e,t,n,a,o,i,l){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),l=t.getElementsByTagName(n)[0],i.async=1,i.src=a,l.parentNode.insertBefore(i,l)}(e,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-41228343-1","auto"),ga("send","pageview"),e.initMap=h,e.initData=v,N(),a()}(window);